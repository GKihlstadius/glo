{
  "project": "Glo",
  "branchName": "ralph/spellage-v3",
  "description": "Spelläge 3.0 - Quiz Planet style multiplayer, trailers, algorithm polish",
  "userStories": [
    {
      "id": "US-030",
      "title": "Together Mode - Invite Creation",
      "description": "As a user, I want to create a Together session and get a shareable code so I can invite a friend.",
      "acceptanceCriteria": [
        "Together button creates new session with WebSocket/realtime subscription",
        "Generate 6-character uppercase code (ABC123)",
        "Generate deep link: glo://join/CODE",
        "Generate QR code for the link",
        "Open native share sheet with link and message",
        "Store session in Supabase/Firebase with: id, code, hostId, guestId, movies[], swipes{}, status",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": "Core feature - this enables all multiplayer functionality"
    },
    {
      "id": "US-031",
      "title": "Together Mode - Waiting Room",
      "description": "As a host, I want to see a waiting room while waiting for my friend to join.",
      "acceptanceCriteria": [
        "Create WaitingRoom component at /waiting/[code]",
        "Display session code prominently (large font, copyable)",
        "Display QR code (react-native-qrcode-svg)",
        "Animated 'Waiting for friend...' text with dots animation",
        "Cancel button that deletes session and navigates back",
        "Subscribe to realtime session updates",
        "Auto-navigate to /session when guest joins (status changes to 'active')",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": "Quiz Planet style waiting screen"
    },
    {
      "id": "US-032",
      "title": "Together Mode - Join via Deep Link",
      "description": "As an invited friend, I want to click a link and join directly.",
      "acceptanceCriteria": [
        "Configure expo-linking for glo:// scheme",
        "Handle deep link glo://join?code=ABC123",
        "Validate code exists in database",
        "Validate session status is 'waiting'",
        "Add device as guest to session",
        "Update session status to 'active'",
        "Navigate to /session",
        "Show error toast if code invalid or session full",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": "Seamless join experience like Quiz Planet"
    },
    {
      "id": "US-033",
      "title": "Together Mode - Manual Code Entry",
      "description": "As an invited friend, I want to manually enter the code if the link doesn't work.",
      "acceptanceCriteria": [
        "Create JoinScreen at /join",
        "6-character code input with auto-uppercase",
        "Real-time validation as user types",
        "Clear error states",
        "Join button enabled when 6 chars entered",
        "Same join logic as deep link",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": "Backup for when deep links fail"
    },
    {
      "id": "US-034",
      "title": "Together Mode - Synchronized Gameplay",
      "description": "As a player in Together mode, I want to see the same movies as my friend so we can compare choices.",
      "acceptanceCriteria": [
        "Host generates 7-movie pool on session creation",
        "Movie pool stored in session (array of movie IDs)",
        "Both players receive same movies in same order",
        "Blind mode enabled for both players",
        "Each player swipes independently",
        "Swipes synced to session in realtime",
        "Show indicator when opponent has swiped (checkmark icon)",
        "Round advances when BOTH players have swiped",
        "Progress bar shows Round X of 7",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": "Core gameplay - must feel responsive and synced"
    },
    {
      "id": "US-035",
      "title": "Together Mode - Match Celebration",
      "description": "As a player, I want to see a celebration when we both like the same movie.",
      "acceptanceCriteria": [
        "After each round, compare both players' swipes",
        "If both swiped 'like' on same movie = MATCH",
        "Show MatchOverlay component with confetti animation",
        "Haptic feedback (success pattern)",
        "Reveal movie title with zoom animation",
        "Show poster prominently",
        "Auto-dismiss after 3 seconds or on tap",
        "Track matches in session state",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": "This is the reward moment - make it feel amazing"
    },
    {
      "id": "US-036",
      "title": "Together Mode - End Game Results",
      "description": "As a player, I want to see the final results after all 7 rounds.",
      "acceptanceCriteria": [
        "Create ResultsScreen shown after round 7",
        "Display all matched movies (posters + titles)",
        "Show stats: 'You liked X, Friend liked Y, Matches: Z'",
        "If 1+ matches: celebratory header 'You found movies to watch together!'",
        "If 0 matches: friendly message 'No matches this time'",
        "Autoplay trailer for first match (if trailer gate passes)",
        "Play Again button (creates new session)",
        "Exit button (returns to home)",
        "Typecheck passes"
      ],
      "priority": 7,
      "passes": false,
      "notes": "End on a high note with clear next actions"
    },
    {
      "id": "US-037",
      "title": "Trailer Integration in Spelläge",
      "description": "As a player, I want to see trailers in Spelläge so I can better judge movies.",
      "acceptanceCriteria": [
        "Reuse TrailerPlayer component from main feed",
        "Integrate useTrailerSource hook in session screen",
        "Integrate useAutoplay hook with session's current movie",
        "Integrate useSwipeStop to stop on gesture",
        "Autoplay after 900-1400ms delay when card is stable",
        "Stop instantly on swipe gesture",
        "Poster fallback if trailer fails",
        "Works in both Solo and Together mode",
        "Typecheck passes"
      ],
      "priority": 8,
      "passes": false,
      "notes": "Same architecture as main feed, just different context"
    },
    {
      "id": "US-038",
      "title": "Algorithm - Exposure Memory",
      "description": "As a user, I don't want to see the same movies repeatedly.",
      "acceptanceCriteria": [
        "Create ExposureStore in Zustand",
        "Track: likedIds[], savedIds[], passedIds[], seenIds[]",
        "Liked/Saved movies NEVER shown again in feed",
        "Passed movies get 24-hour cooldown",
        "Track last 100 seen movies",
        "Persist to AsyncStorage",
        "Feed engine filters out exposed movies",
        "Typecheck passes"
      ],
      "priority": 9,
      "passes": false,
      "notes": "Critical for feed freshness"
    },
    {
      "id": "US-039",
      "title": "Algorithm - Taste Learning",
      "description": "As a user, I want the app to learn my preferences over time.",
      "acceptanceCriteria": [
        "Enhance TasteProfile with weighted signals",
        "Like: +2 genre, +1 director, +0.5 cast",
        "Save: +3 genre, +2 director, +1 cast",
        "Pass: -0.3 genre (weak negative)",
        "Spelläge match: +5 genre (strongest signal)",
        "Decay old signals over time (halve after 30 days)",
        "Feed engine uses taste profile for scoring",
        "Persist taste profile to AsyncStorage",
        "Typecheck passes"
      ],
      "priority": 10,
      "passes": false,
      "notes": "Makes recommendations smarter over time"
    },
    {
      "id": "US-040",
      "title": "Algorithm - Diversity Rules",
      "description": "As a user, I want to see a diverse mix of movies.",
      "acceptanceCriteria": [
        "Max 2 movies from same genre in a row",
        "Max 3 movies from same decade in a row",
        "At least 1 movie per 10 is <5 years old",
        "At least 1 movie per 10 is >20 years old (classic)",
        "10% of feed is 'wildcard' (random discovery)",
        "Spelläge pool must have diverse genres (no 2 same genre)",
        "Typecheck passes"
      ],
      "priority": 11,
      "passes": false,
      "notes": "Prevents monotony and filter bubbles"
    },
    {
      "id": "US-041",
      "title": "Realtime Backend Setup",
      "description": "As a developer, I need a realtime backend for Together mode.",
      "acceptanceCriteria": [
        "Set up Supabase project OR Firebase project",
        "Create sessions table/collection with schema",
        "Configure realtime subscriptions",
        "Create helper functions: createSession(), joinSession(), updateSwipe(), endSession()",
        "Handle reconnection gracefully",
        "Session cleanup: delete sessions older than 2 hours",
        "Environment variables for API keys",
        "Typecheck passes"
      ],
      "priority": 12,
      "passes": false,
      "notes": "Foundation for all multiplayer features"
    }
  ]
}
